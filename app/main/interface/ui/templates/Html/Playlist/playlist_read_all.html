{% extends 'Html/partial/structure/base.html' %}
{% load Playlist %}
{% load Utils %}

{% block page_title %}Mes Boutons Playlist | AmbianceBoard{% endblock %}

{% block content %}

<div class="row mb-3">
    <div class="col-12">
        <form method="GET" action="{% url 'playlistsAllList' %}">
            <div class="d-flex align-items-center gap-2">
                <label for="playlistType" class="form-label mb-0">Filtrer par type:</label>
                <select name="playlistType" id="playlistType" class="form-select" style="width: auto;" onchange="this.form.submit()">
                    <option value="">Tous les types</option>
                    {% for type_key, type_value in playlistType.items %}
                    <option value="{{ type_value }}" {% if selected_type == type_value %}selected{% endif %}>{{ type_value }}</option>
                    {% endfor %}
                </select>
            </div>
        </form>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div class="flex-container">
            {% for playlist in playlists %}

            <a href="{% url 'playlistUpdate' playlist.uuid %}">
                <div class="position-relative">

                    
                    <div class="playlist-link playlist-element flex-item playlist-dim-{{ playlist_dim }} m-1" style="background-color: {{ playlist.get_color }};color: {{ playlist.get_color_text }};">
                        {{ playlist | applys_playlist_content}}
                    </div>
                    {% with number_tracks=number_tracks_by_playlist|get_dict_item:playlist.id|default:"0" %} 
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill {% if number_tracks > 0 %}bg-primary{% else %}bg-danger{% endif %}">
                        {{ number_tracks }}
                    </span>
                    {% endwith %}
                </div>

            </a>
            {% endfor %}
        </div>
    </div>
</div>

<div>
    <a class="btn btn-primary btn-block" href="{% url 'addPlaylist' %}">Ajouter un bouton</a>
</div>
{% endblock %}